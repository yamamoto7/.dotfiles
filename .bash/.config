# ============================================
# History settings
# ============================================
HISTSIZE=100000
HISTFILESIZE=100000
HISTCONTROL=ignoredups:erasedups
HISTIGNORE="ls:cd:cd -:pwd:exit:date:* --help"

# When the shell exits, append to the history file instead of overwriting it
shopt -s histappend

# Share history across terminals
# (zoxide and mise will add their hooks to PROMPT_COMMAND automatically)
function __share_history {
    history -a
    history -c
    history -r
}

# Properly append to PROMPT_COMMAND instead of overwriting
if [[ -z "$PROMPT_COMMAND" ]]; then
    PROMPT_COMMAND="__share_history"
else
    PROMPT_COMMAND="__share_history;$PROMPT_COMMAND"
fi

